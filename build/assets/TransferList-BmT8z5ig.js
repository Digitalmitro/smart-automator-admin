import{w as D,r as a,k as _,j as e}from"./index-_oFzRGsN.js";import{a as k}from"./logo-CSkKVHs_.js";import{u as h,w as T}from"./xlsx-Btx5Z9-G.js";import{Q as R}from"./ReactToastify-iM3XEq0i.js";import{m as c}from"./proxy-xutnNBsr.js";import"./clsx-B-dksMZM.js";var A={};const q=()=>{const{id:m}=D();console.log(m);const[E,B]=a.useState(!0),j=_(),[L,O]=a.useState([]),[x,p]=a.useState([]),[l,f]=a.useState(""),[i,b]=a.useState("Date"),[v,w]=a.useState([]),[P,U]=a.useState([]),[u,$]=a.useState([]),N=async()=>{const s=await k.get(`${A.REACT_APP_BACKEND_API}/transfer-user/${m}`);p(s.data.transfer),S(l,i,s.data.transfer)};u.filter(s=>s.currentDate&&s.punchin&&s.punchOut&&s.time&&s.ip),console.log(u),a.useEffect(()=>{N()},[l,i]);const y=s=>{f(s.target.value)},g=s=>{b(s.target.value)},S=(s,o,d)=>{let r=d.filter(n=>Object.values(n).join(" ").toLowerCase().includes(s.toLowerCase()));o==="Date"?r.sort((n,t)=>new Date(n.date)-new Date(t.date)):o==="Name"&&r.sort((n,t)=>n.name.localeCompare(t.name)),w(r)},C=()=>{if(console.log("hello"),x.length===0){console.error("No data to download");return}const s=h.json_to_sheet(x),o=h.book_new();h.book_append_sheet(o,s,"Sheet1");const d=T(o,{bookType:"xlsx",type:"array"}),r=new Blob([d],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),n=URL.createObjectURL(r),t=document.createElement("a");t.href=n,t.setAttribute("download","Transfer.xlsx"),document.body.appendChild(t),t.click(),document.body.removeChild(t),URL.revokeObjectURL(n)};return e.jsx(e.Fragment,{children:e.jsxs(c.div,{className:" main-container1 container mb-5 ",children:[e.jsx(R,{}),e.jsxs("div",{className:"container margin-container  mb-5",children:[e.jsxs("div",{className:"d-flex",style:{justifyContent:"space-between"},children:[e.jsx(c.h1,{className:" fw-bold ms-3",children:"Transfer Activities"}),e.jsx(c.h1,{className:" fw-bold ms-3",children:e.jsxs("button",{className:"btn btn-success",onClick:C,children:[e.jsx("i",{class:"fa-solid fa-download"})," Transfer Data"]})})]}),e.jsx(c.div,{className:"mt-3 mb-2",children:e.jsxs("div",{className:"d-flex",children:[e.jsx("div",{children:e.jsx("input",{type:"text",placeholder:"Search...",value:l,onChange:y})}),e.jsx("div",{children:e.jsxs("select",{className:"ms-2",name:"sortBy",id:"sortBy",style:{height:"28px"},value:i,onChange:g,children:[e.jsx("option",{value:"Date",children:"Date"}),e.jsx("option",{value:"Name",children:"Name"})]})})]})}),e.jsx(c.div,{className:"table-responsive  container",children:e.jsxs("table",{class:"table table-striped",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",children:"Name"}),e.jsx("th",{scope:"col",children:"Email"}),e.jsx("th",{scope:"col",children:"Phone"}),e.jsx("th",{scope:"col",children:"Domain Name"}),e.jsx("th",{scope:"col",children:"Transfers-To"}),e.jsx("th",{scope:"col",children:"Actions"})]})}),e.jsx("tbody",{children:v.map((s,o)=>e.jsxs("tr",{children:[e.jsx("td",{children:s.name}),e.jsx("td",{children:s.email}),e.jsx("td",{children:s.phone}),e.jsx("td",{children:s.domainName}),e.jsx("td",{children:s.transferTo}),e.jsx("td",{children:e.jsx("button",{className:"btn btn-success",onClick:()=>j(`/transfer-details/${s._id}`),children:"View"})})]},s._id))})]})})]})]})})};export{q as default};
