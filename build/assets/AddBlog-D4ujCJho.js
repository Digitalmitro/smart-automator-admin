import{k as B,r as t,j as e}from"./index-B-EWrbtd.js";import{b as D}from"./logo-0TUeJTsT.js";import{Q as O,B as o}from"./ReactToastify-BewjxqIG.js";import{C as F}from"./CCard-CpqHJJ7L.js";import{C as P}from"./CCardHeader-Bo5J6p4Z.js";import{m as N}from"./proxy-Bix4skJF.js";import{C as w}from"./CCardBody-CQlk2bx7.js";import"./clsx-B-dksMZM.js";var C={NVM_INC:"/Users/sayaksengupta/.nvm/versions/node/v20.5.1/include/node",TERM_PROGRAM:"vscode",NODE:"/Users/sayaksengupta/.nvm/versions/node/v20.5.1/bin/node",INIT_CWD:"/Users/sayaksengupta/Desktop/DigitalMitro/Smart Automator/Smart Automator Admin/smart-automator-admin",NVM_CD_FLAGS:"-q",TERM:"xterm-256color",SHELL:"/bin/zsh",npm_config_metrics_registry:"https://registry.npmjs.org/",HOMEBREW_REPOSITORY:"/opt/homebrew",TMPDIR:"/var/folders/ql/jd0xszm140z52480mgn4sph40000gn/T/",npm_config_global_prefix:"/Users/sayaksengupta/.nvm/versions/node/v20.5.1",TERM_PROGRAM_VERSION:"1.68.0",ORIGINAL_XDG_CURRENT_DESKTOP:"undefined",COLOR:"1",npm_config_noproxy:"",npm_config_local_prefix:"/Users/sayaksengupta/Desktop/DigitalMitro/Smart Automator/Smart Automator Admin/smart-automator-admin",NVM_DIR:"/Users/sayaksengupta/.nvm",USER:"sayaksengupta",COMMAND_MODE:"unix2003",npm_config_globalconfig:"/Users/sayaksengupta/.nvm/versions/node/v20.5.1/etc/npmrc",SSH_AUTH_SOCK:"/private/tmp/com.apple.launchd.9TW410B9YU/Listeners",__CF_USER_TEXT_ENCODING:"0x1F5:0x0:0x0",npm_execpath:"/Users/sayaksengupta/.nvm/versions/node/v20.5.1/lib/node_modules/npm/bin/npm-cli.js",PATH:"/Users/sayaksengupta/Desktop/DigitalMitro/Smart Automator/Smart Automator Admin/smart-automator-admin/node_modules/.bin:/Users/sayaksengupta/Desktop/DigitalMitro/Smart Automator/Smart Automator Admin/node_modules/.bin:/Users/sayaksengupta/Desktop/DigitalMitro/Smart Automator/node_modules/.bin:/Users/sayaksengupta/Desktop/DigitalMitro/node_modules/.bin:/Users/sayaksengupta/Desktop/node_modules/.bin:/Users/sayaksengupta/node_modules/.bin:/Users/node_modules/.bin:/node_modules/.bin:/Users/sayaksengupta/.nvm/versions/node/v20.5.1/lib/node_modules/npm/node_modules/@npmcli/run-script/lib/node-gyp-bin:/opt/homebrew/opt/openjdk@17/bin:/Users/sayaksengupta/.nvm/versions/node/v20.5.1/bin:/Library/Frameworks/Python.framework/Versions/3.12/bin:/opt/homebrew/bin:/opt/homebrew/sbin:/usr/local/bin:/System/Cryptexes/App/usr/bin:/usr/bin:/bin:/usr/sbin:/sbin:/var/run/com.apple.security.cryptexd/codex.system/bootstrap/usr/local/bin:/var/run/com.apple.security.cryptexd/codex.system/bootstrap/usr/bin:/var/run/com.apple.security.cryptexd/codex.system/bootstrap/usr/appleinternal/bin:/Library/Apple/usr/bin:/opt/homebrew/opt/openjdk@17/bin:/Users/sayaksengupta/.nvm/versions/node/v20.5.1/bin:/Library/Frameworks/Python.framework/Versions/3.12/bin:/Users/sayaksengupta/development/flutter/bin:/Users/sayaksengupta/mongodb-macos-aarch64-7.0.12/bin:/Users/sayaksengupta/development/flutter/bin:/Users/sayaksengupta/mongodb-macos-aarch64-7.0.12/bin",npm_package_json:"/Users/sayaksengupta/Desktop/DigitalMitro/Smart Automator/Smart Automator Admin/smart-automator-admin/package.json",_:"/Users/sayaksengupta/Desktop/DigitalMitro/Smart Automator/Smart Automator Admin/smart-automator-admin/node_modules/.bin/vite",npm_config_userconfig:"/Users/sayaksengupta/.npmrc",npm_config_init_module:"/Users/sayaksengupta/.npm-init.js",__CFBundleIdentifier:"com.microsoft.VSCode",npm_command:"run-script",PWD:"/Users/sayaksengupta/Desktop/DigitalMitro/Smart Automator/Smart Automator Admin/smart-automator-admin",JAVA_HOME:"/opt/homebrew/opt/openjdk@17",npm_lifecycle_event:"build",EDITOR:"vi",npm_package_name:"@coreui/coreui-free-react-admin-template",LANG:"en_GB.UTF-8",npm_config_npm_version:"9.8.0",VSCODE_GIT_ASKPASS_EXTRA_ARGS:"--ms-enable-electron-run-as-node",XPC_FLAGS:"0x0",npm_config_node_gyp:"/Users/sayaksengupta/.nvm/versions/node/v20.5.1/lib/node_modules/npm/node_modules/node-gyp/bin/node-gyp.js",npm_package_version:"5.0.0",XPC_SERVICE_NAME:"0",SHLVL:"2",HOME:"/Users/sayaksengupta",VSCODE_GIT_ASKPASS_MAIN:"/private/var/folders/ql/jd0xszm140z52480mgn4sph40000gn/T/AppTranslocation/1FEBBF32-087D-40AA-9BA4-F4246D629BDD/d/Visual Studio Code.app/Contents/Resources/app/extensions/git/dist/askpass-main.js",HOMEBREW_PREFIX:"/opt/homebrew",npm_config_cache:"/Users/sayaksengupta/.npm",LOGNAME:"sayaksengupta",npm_lifecycle_script:"vite build",VSCODE_GIT_IPC_HANDLE:"/var/folders/ql/jd0xszm140z52480mgn4sph40000gn/T/vscode-git-30aa27c3a1.sock",NVM_BIN:"/Users/sayaksengupta/.nvm/versions/node/v20.5.1/bin",npm_config_user_agent:"npm/9.8.0 node/v20.5.1 darwin arm64 workspaces/false",GIT_ASKPASS:"/private/var/folders/ql/jd0xszm140z52480mgn4sph40000gn/T/AppTranslocation/1FEBBF32-087D-40AA-9BA4-F4246D629BDD/d/Visual Studio Code.app/Contents/Resources/app/extensions/git/dist/askpass.sh",VSCODE_GIT_ASKPASS_NODE:"/private/var/folders/ql/jd0xszm140z52480mgn4sph40000gn/T/AppTranslocation/1FEBBF32-087D-40AA-9BA4-F4246D629BDD/d/Visual Studio Code.app/Contents/Frameworks/Code Helper.app/Contents/MacOS/Code Helper",INFOPATH:"/opt/homebrew/share/info:/opt/homebrew/share/info:",HOMEBREW_CELLAR:"/opt/homebrew/Cellar",npm_node_execpath:"/Users/sayaksengupta/.nvm/versions/node/v20.5.1/bin/node",npm_config_prefix:"/Users/sayaksengupta/.nvm/versions/node/v20.5.1",COLORTERM:"truecolor",NODE_ENV:"production",REACT_APP_BACKEND_API:"http://localhost:3500"};const $=()=>{const p=B(),[d,b]=t.useState(""),[c,h]=t.useState(""),[v,f]=t.useState(""),[u,g]=t.useState(""),[y,x]=t.useState(!0),[L,j]=t.useState([]),[l,A]=t.useState([]),[E,S]=t.useState(!1),m=localStorage.getItem("token"),U=s=>s.toLowerCase().trim().replace(/[^a-z0-9]+/g,"-").replace(/^-+|-+$/g,""),T=s=>{const a=s.target.value;b(a),g(U(a))},I=async s=>{var i,n;const a=Array.from(s.target.files);if(!a.length){o.error("Please select valid files.");return}const r=[];S(!0);try{for(let _ of a){const k=new FormData;k.append("file",_);const M=await D.post(`${C.REACT_APP_BACKEND_API}/upload`,k,{headers:{token:m,"Content-Type":"multipart/form-data"}});r.push(M.data.fileUrl)}A(r),o.success("Images uploaded successfully")}catch(_){o.error(((n=(i=_.response)==null?void 0:i.data)==null?void 0:n.message)||"Failed to upload images")}finally{S(!1)}},R=async s=>{var r,i;if(s.preventDefault(),!d||!c||!u||!l.length){o.error("Please fill all required fields and upload at least one image.");return}const a={title:d,shortDescription:v,description:c,slug:u,active:y,images:l};try{const n=await D.post(`${C.REACT_APP_BACKEND_API}/admin/add-blog`,a,{headers:{token:m}});o.success(n.data.message||"Blog added successfully"),b(""),h(""),f(""),g(""),x(!1),A([]),j([]),p("/blogs-list")}catch(n){o.error(((i=(r=n.response)==null?void 0:r.data)==null?void 0:i.message)||"Failed to add blog")}};return t.useEffect(()=>{m||p("/login")},[m]),e.jsxs(e.Fragment,{children:[e.jsx(O,{}),e.jsxs(F,{className:"mb-4",children:[e.jsxs(P,{className:"d-flex",style:{justifyContent:"space-between"},children:[e.jsx(N.h2,{className:"fw-bold",style:{marginBottom:"40px"},children:"Add Blog"}),e.jsx("button",{className:"btn btn-info text-white",style:{height:"50px"},onClick:()=>p("/blogs-list"),children:"Blog List"})]}),e.jsx(w,{children:e.jsx(N.div,{children:e.jsxs("form",{onSubmit:R,className:"row g-3",children:[e.jsxs("div",{className:"col-md-6",children:[e.jsx("label",{htmlFor:"inputTitle",className:"form-label",children:"Blog Title"}),e.jsx("input",{value:d,onChange:T,type:"text",className:"form-control",id:"inputTitle",required:!0})]}),e.jsxs("div",{className:"col-md-6",children:[e.jsx("label",{htmlFor:"inputSlug",className:"form-label",children:"Slug"}),e.jsx("input",{value:u,onChange:s=>g(s.target.value),type:"text",className:"form-control",id:"inputSlug",required:!0})]}),e.jsxs("div",{className:"col-md-6",children:[e.jsx("label",{htmlFor:"inputSlug",className:"form-label",children:"Short Description"}),e.jsx("input",{value:v,onChange:s=>f(s.target.value),type:"text",className:"form-control",id:"inputSlug",required:!0})]}),e.jsxs("div",{className:"col-md-12",children:[e.jsx("label",{htmlFor:"inputDescription",className:"form-label",children:"Description"}),e.jsx("textarea",{value:c,onChange:s=>h(s.target.value),className:"form-control",id:"inputDescription",rows:"5",required:!0})]}),e.jsxs("div",{className:"col-md-6",children:[e.jsx("label",{htmlFor:"inputImages",className:"form-label",children:"Upload Images"}),e.jsx("input",{type:"file",className:"form-control",id:"inputImages",onChange:I,multiple:!0,required:!0}),E?e.jsx("div",{className:"text-center",children:e.jsx("div",{className:"spinner-border text-primary",role:"status",children:e.jsx("span",{className:"visually-hidden",children:"Loading..."})})}):l.length>0&&e.jsxs("div",{className:"mt-2",children:[e.jsx("label",{className:"form-label",children:"Image Previews"}),e.jsx("div",{className:"d-flex flex-wrap gap-2",children:l.map((s,a)=>e.jsx("img",{src:s,alt:"Uploaded",className:"img-thumbnail",style:{maxHeight:"150px"}},a))})]})]}),e.jsxs("div",{className:"col-md-6 d-flex align-items-center",children:[e.jsx("label",{className:"form-check-label me-2",htmlFor:"inputActive",children:"Active"}),e.jsx("input",{type:"checkbox",className:"form-check-input",id:"inputActive",checked:y,onChange:s=>x(s.target.checked)})]}),e.jsx("div",{className:"col-12",children:e.jsx("button",{type:"submit",className:"btn btn-primary",children:"Add Blog"})})]})})})]})]})};export{$ as default};
