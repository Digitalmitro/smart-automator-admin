import{k as w,r,j as e}from"./index-Cb6zMgq2.js";import{b as u}from"./logo-0TUeJTsT.js";import{B as p,Q as I}from"./ReactToastify-BBw959Jj.js";import{C as L}from"./CCard-Dhvwf52-.js";import{C as V}from"./CCardHeader-ed528WD5.js";import{m as D}from"./proxy-DfvZMOWR.js";import{C as H}from"./CCardBody-CrIBeVSF.js";import"./clsx-B-dksMZM.js";var g={NVM_INC:"/Users/sayaksengupta/.nvm/versions/node/v20.5.1/include/node",TERM_PROGRAM:"vscode",NODE:"/Users/sayaksengupta/.nvm/versions/node/v20.5.1/bin/node",INIT_CWD:"/Users/sayaksengupta/Desktop/DigitalMitro/Smart Automator/Smart Automator Admin/smart-automator-admin",NVM_CD_FLAGS:"-q",TERM:"xterm-256color",SHELL:"/bin/zsh",npm_config_metrics_registry:"https://registry.npmjs.org/",HOMEBREW_REPOSITORY:"/opt/homebrew",TMPDIR:"/var/folders/ql/jd0xszm140z52480mgn4sph40000gn/T/",npm_config_global_prefix:"/Users/sayaksengupta/.nvm/versions/node/v20.5.1",TERM_PROGRAM_VERSION:"1.68.0",ORIGINAL_XDG_CURRENT_DESKTOP:"undefined",COLOR:"1",npm_config_noproxy:"",npm_config_local_prefix:"/Users/sayaksengupta/Desktop/DigitalMitro/Smart Automator/Smart Automator Admin/smart-automator-admin",NVM_DIR:"/Users/sayaksengupta/.nvm",USER:"sayaksengupta",COMMAND_MODE:"unix2003",npm_config_globalconfig:"/Users/sayaksengupta/.nvm/versions/node/v20.5.1/etc/npmrc",SSH_AUTH_SOCK:"/private/tmp/com.apple.launchd.9TW410B9YU/Listeners",__CF_USER_TEXT_ENCODING:"0x1F5:0x0:0x0",npm_execpath:"/Users/sayaksengupta/.nvm/versions/node/v20.5.1/lib/node_modules/npm/bin/npm-cli.js",PATH:"/Users/sayaksengupta/Desktop/DigitalMitro/Smart Automator/Smart Automator Admin/smart-automator-admin/node_modules/.bin:/Users/sayaksengupta/Desktop/DigitalMitro/Smart Automator/Smart Automator Admin/node_modules/.bin:/Users/sayaksengupta/Desktop/DigitalMitro/Smart Automator/node_modules/.bin:/Users/sayaksengupta/Desktop/DigitalMitro/node_modules/.bin:/Users/sayaksengupta/Desktop/node_modules/.bin:/Users/sayaksengupta/node_modules/.bin:/Users/node_modules/.bin:/node_modules/.bin:/Users/sayaksengupta/.nvm/versions/node/v20.5.1/lib/node_modules/npm/node_modules/@npmcli/run-script/lib/node-gyp-bin:/opt/homebrew/opt/openjdk@17/bin:/Users/sayaksengupta/.nvm/versions/node/v20.5.1/bin:/Library/Frameworks/Python.framework/Versions/3.12/bin:/opt/homebrew/bin:/opt/homebrew/sbin:/usr/local/bin:/System/Cryptexes/App/usr/bin:/usr/bin:/bin:/usr/sbin:/sbin:/var/run/com.apple.security.cryptexd/codex.system/bootstrap/usr/local/bin:/var/run/com.apple.security.cryptexd/codex.system/bootstrap/usr/bin:/var/run/com.apple.security.cryptexd/codex.system/bootstrap/usr/appleinternal/bin:/Library/Apple/usr/bin:/opt/homebrew/opt/openjdk@17/bin:/Users/sayaksengupta/.nvm/versions/node/v20.5.1/bin:/Library/Frameworks/Python.framework/Versions/3.12/bin:/Users/sayaksengupta/development/flutter/bin:/Users/sayaksengupta/mongodb-macos-aarch64-7.0.12/bin:/Users/sayaksengupta/development/flutter/bin:/Users/sayaksengupta/mongodb-macos-aarch64-7.0.12/bin",npm_package_json:"/Users/sayaksengupta/Desktop/DigitalMitro/Smart Automator/Smart Automator Admin/smart-automator-admin/package.json",_:"/Users/sayaksengupta/Desktop/DigitalMitro/Smart Automator/Smart Automator Admin/smart-automator-admin/node_modules/.bin/vite",npm_config_userconfig:"/Users/sayaksengupta/.npmrc",npm_config_init_module:"/Users/sayaksengupta/.npm-init.js",__CFBundleIdentifier:"com.microsoft.VSCode",npm_command:"run-script",PWD:"/Users/sayaksengupta/Desktop/DigitalMitro/Smart Automator/Smart Automator Admin/smart-automator-admin",JAVA_HOME:"/opt/homebrew/opt/openjdk@17",npm_lifecycle_event:"build",EDITOR:"vi",npm_package_name:"@coreui/coreui-free-react-admin-template",LANG:"en_GB.UTF-8",npm_config_npm_version:"9.8.0",VSCODE_GIT_ASKPASS_EXTRA_ARGS:"--ms-enable-electron-run-as-node",XPC_FLAGS:"0x0",npm_config_node_gyp:"/Users/sayaksengupta/.nvm/versions/node/v20.5.1/lib/node_modules/npm/node_modules/node-gyp/bin/node-gyp.js",npm_package_version:"5.0.0",XPC_SERVICE_NAME:"0",SHLVL:"2",HOME:"/Users/sayaksengupta",VSCODE_GIT_ASKPASS_MAIN:"/private/var/folders/ql/jd0xszm140z52480mgn4sph40000gn/T/AppTranslocation/1FEBBF32-087D-40AA-9BA4-F4246D629BDD/d/Visual Studio Code.app/Contents/Resources/app/extensions/git/dist/askpass-main.js",HOMEBREW_PREFIX:"/opt/homebrew",npm_config_cache:"/Users/sayaksengupta/.npm",LOGNAME:"sayaksengupta",npm_lifecycle_script:"vite build",VSCODE_GIT_IPC_HANDLE:"/var/folders/ql/jd0xszm140z52480mgn4sph40000gn/T/vscode-git-30aa27c3a1.sock",NVM_BIN:"/Users/sayaksengupta/.nvm/versions/node/v20.5.1/bin",npm_config_user_agent:"npm/9.8.0 node/v20.5.1 darwin arm64 workspaces/false",GIT_ASKPASS:"/private/var/folders/ql/jd0xszm140z52480mgn4sph40000gn/T/AppTranslocation/1FEBBF32-087D-40AA-9BA4-F4246D629BDD/d/Visual Studio Code.app/Contents/Resources/app/extensions/git/dist/askpass.sh",VSCODE_GIT_ASKPASS_NODE:"/private/var/folders/ql/jd0xszm140z52480mgn4sph40000gn/T/AppTranslocation/1FEBBF32-087D-40AA-9BA4-F4246D629BDD/d/Visual Studio Code.app/Contents/Frameworks/Code Helper.app/Contents/MacOS/Code Helper",INFOPATH:"/opt/homebrew/share/info:/opt/homebrew/share/info:",HOMEBREW_CELLAR:"/opt/homebrew/Cellar",npm_node_execpath:"/Users/sayaksengupta/.nvm/versions/node/v20.5.1/bin/node",npm_config_prefix:"/Users/sayaksengupta/.nvm/versions/node/v20.5.1",COLORTERM:"truecolor",NODE_ENV:"production",REACT_APP_BACKEND_API:"https://api.smartautomator.com"};const J=()=>{const c=w(),[_,h]=r.useState(""),[v,b]=r.useState(""),[y,A]=r.useState(""),[f,C]=r.useState(""),[S,x]=r.useState(""),[j,E]=r.useState([]),[n,i]=r.useState([{question:"",options:[""]}]),[G,k]=r.useState(null),[d,N]=r.useState(""),l=localStorage.getItem("token"),U=async s=>{const t=s.target.files[0];k(t);const a=new FormData;a.append("file",t);try{const o=await u.post(`${g.REACT_APP_BACKEND_API}/upload`,a,{headers:{token:l,"Content-Type":"multipart/form-data"}});N(o.data.fileUrl),p.success("Image uploaded successfully!")}catch{p.error("Failed to upload image.")}},R=async s=>{var a,o;s.preventDefault();const t={serviceName:_,shortDescription:v,description:y,hourlyCharge:f,serviceCategory:S,questions:n,image:d};try{const m=await u.post(`${g.REACT_APP_BACKEND_API}/admin/add-service`,t,{headers:{token:l}});p.success(m.data.message||"Service added successfully"),h(""),b(""),A(""),C(""),x(""),i([{question:"",options:[""]}]),k(null),N(""),c("/service-list")}catch(m){p.error(((o=(a=m.response)==null?void 0:a.data)==null?void 0:o.message)||"Failed to add service")}},T=()=>{i([...n,{question:"",options:[""]}])},O=s=>{n.length>1&&i(n.filter((t,a)=>a!==s))},F=(s,t)=>{const a=[...n];a[s].question=t,i(a)},M=s=>{const t=[...n];t[s].options.push(""),i(t)},P=(s,t,a)=>{const o=[...n];o[s].options[t]=a,i(o)},B=(s,t)=>{const a=[...n];a[s].options.length>1&&(a[s].options=a[s].options.filter((o,m)=>m!==t),i(a))};return r.useEffect(()=>{l?u.get(`${g.REACT_APP_BACKEND_API}/admin/service-categories`,{headers:{token:l}}).then(s=>{E(s.data.categories)}).catch(()=>{p.error("Failed to load service categories")}):c("/login")},[l]),e.jsxs(e.Fragment,{children:[e.jsx(I,{}),e.jsxs(L,{className:"mb-4",children:[e.jsxs(V,{className:"d-flex",style:{justifyContent:"space-between"},children:[e.jsx(D.h2,{className:"fw-bold",style:{marginBottom:"40px"},children:"Add Service"}),e.jsx("button",{className:"btn btn-info text-white",style:{height:"50px"},onClick:()=>c("/services-list"),children:"Services List"})]}),e.jsx(H,{children:e.jsx(D.div,{children:e.jsxs("form",{onSubmit:R,className:"row g-3",children:[e.jsxs("div",{className:"col-md-6",children:[e.jsx("label",{htmlFor:"serviceName",className:"form-label",children:"Service Name"}),e.jsx("input",{value:_,onChange:s=>h(s.target.value),type:"text",className:"form-control",id:"serviceName",required:!0})]}),e.jsxs("div",{className:"col-md-6",children:[e.jsx("label",{htmlFor:"shortDescription",className:"form-label",children:"Short Description"}),e.jsx("input",{value:v,onChange:s=>b(s.target.value),type:"text",className:"form-control",id:"shortDescription",required:!0})]}),e.jsxs("div",{className:"col-md-6",children:[e.jsx("label",{htmlFor:"description",className:"form-label",children:"Description"}),e.jsx("input",{value:y,onChange:s=>A(s.target.value),type:"text",className:"form-control",id:"description",required:!0})]}),e.jsxs("div",{className:"col-md-6",children:[e.jsx("label",{htmlFor:"hourlyCharge",className:"form-label",children:"Hourly Charge"}),e.jsx("input",{value:f,onChange:s=>C(s.target.value),type:"number",className:"form-control",id:"hourlyCharge",required:!0})]}),e.jsxs("div",{className:"col-md-6",children:[e.jsx("label",{htmlFor:"serviceCategory",className:"form-label",children:"Service Category"}),e.jsxs("select",{value:S,onChange:s=>x(s.target.value),className:"form-control",id:"serviceCategory",required:!0,children:[e.jsx("option",{value:"",children:"Select Category"}),j.map(s=>e.jsx("option",{value:s._id,children:s.name},s._id))]})]}),e.jsxs("div",{className:"col-md-6",children:[e.jsx("label",{htmlFor:"image",className:"form-label",children:"Upload Image"}),e.jsx("input",{type:"file",className:"form-control",id:"image",onChange:U,accept:"image/*",required:!0})]}),d&&e.jsx(e.Fragment,{children:e.jsx("img",{src:d,style:{maxWidth:"150px"}})}),n.map((s,t)=>e.jsxs("div",{className:"col-12",children:[e.jsxs("label",{className:"form-label",children:["Question ",t+1]}),e.jsxs("div",{className:"input-group mb-3",children:[e.jsx("input",{type:"text",className:"form-control",placeholder:"Enter question",value:s.question,onChange:a=>F(t,a.target.value),required:!0}),n.length>1&&e.jsx("button",{type:"button",className:"btn btn-danger",onClick:()=>O(t),children:"Remove"})]}),s.options.map((a,o)=>e.jsxs("div",{className:"input-group mb-2",children:[e.jsx("input",{type:"text",className:"form-control",placeholder:"Enter option",value:a,onChange:m=>P(t,o,m.target.value),required:!0}),s.options.length>1&&e.jsx("button",{type:"button",className:"btn btn-outline-danger",onClick:()=>B(t,o),children:"Remove"})]},o)),e.jsx("button",{type:"button",className:"btn btn-outline-primary mb-3",onClick:()=>M(t),children:"Add Option"})]},t)),e.jsx("button",{type:"button",className:"btn btn-outline-success",onClick:T,children:"Add Another Question"}),e.jsx("button",{type:"submit",className:"btn btn-primary",children:"Add Service"})]})})})]})]})};export{J as default};
