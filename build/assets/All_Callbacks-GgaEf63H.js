import{w as S,r as s,k as g,j as e}from"./index-C3g2134x.js";import{a as D}from"./logo-CSkKVHs_.js";import{u as h,w as _}from"./xlsx-Btx5Z9-G.js";import{Q as A}from"./ReactToastify-DWBHxbUU.js";import{m as c}from"./proxy-0-9FxVb5.js";import"./clsx-B-dksMZM.js";var B={REACT_APP_BACKEND_API:"https://api.smartautomator.com"};const q=()=>{const{id:u}=S();console.log(u);const[R,E]=s.useState(!0);g();const[m,p]=s.useState([]),[P,L]=s.useState([]),[O,T]=s.useState([]),[x,U]=s.useState([]),[r,j]=s.useState(""),[d,f]=s.useState("Date"),[b,v]=s.useState([]),N=async()=>{const t=await D.get(`${B.REACT_APP_BACKEND_API}/allcallback`);console.log("data",t.data),p(t.data),y(r,d,t.data)};x.filter(t=>t.currentDate&&t.punchin&&t.punchOut&&t.time&&t.ip),console.log(x),s.useEffect(()=>{N()},[r,d]);const w=t=>{j(t.target.value)},C=t=>{f(t.target.value)},y=(t,l,i)=>{let n=i.filter(o=>Object.values(o).join(" ").toLowerCase().includes(t.toLowerCase()));l==="Date"?n.sort((o,a)=>new Date(o.date)-new Date(a.date)):l==="Name"&&n.sort((o,a)=>o.name.localeCompare(a.name)),v(n)},k=()=>{if(m.length===0){console.error("No data to download");return}const t=h.json_to_sheet(m),l=h.book_new();h.book_append_sheet(l,t,"Sheet1");const i=_(l,{bookType:"xlsx",type:"array"}),n=new Blob([i],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),o=URL.createObjectURL(n),a=document.createElement("a");a.href=o,a.setAttribute("download","callBack.xlsx"),document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(o)};return e.jsx(e.Fragment,{children:e.jsxs(c.div,{className:" main-container1 container mb-5 ",children:[e.jsx(A,{}),e.jsxs("div",{className:"container margin-container  mb-5",children:[e.jsxs("div",{className:"d-flex",style:{justifyContent:"space-between"},children:[e.jsx(c.h1,{className:" fw-bold ms-3",children:"CallBacks Activities"}),e.jsx(c.h1,{className:" fw-bold ms-3",children:e.jsxs("button",{className:"btn btn-success",onClick:k,children:[e.jsx("i",{class:"fa-solid fa-download"})," callBack Data"]})})]}),e.jsx(c.div,{className:" mb-2 mt-2",children:e.jsxs("div",{className:"d-flex",children:[e.jsx("div",{children:e.jsx("input",{type:"text",placeholder:"Search...",value:r,onChange:w})}),e.jsx("div",{children:e.jsxs("select",{className:"ms-2",name:"sortBy",id:"sortBy",style:{height:"28px"},value:d,onChange:C,children:[e.jsx("option",{value:"Date",children:"Date"}),e.jsx("option",{value:"Name",children:"Name"})]})})]})}),e.jsx(c.div,{className:"table-responsive ",children:e.jsxs("table",{class:"table table-striped",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",children:"Name"}),e.jsx("th",{scope:"col",children:"Email"}),e.jsx("th",{scope:"col",children:"Phone"}),e.jsx("th",{scope:"col",children:"Domain Name"}),e.jsx("th",{scope:"col",children:"Calldate"})]})}),e.jsx("tbody",{children:b.map((t,l)=>e.jsxs("tr",{children:[e.jsx("td",{children:t.name}),e.jsx("td",{children:t.email}),e.jsx("td",{children:t.phone}),e.jsx("td",{children:t.domainName}),e.jsx("td",{children:t.calldate})]},t._id))})]})})]})]})})};export{q as default};
